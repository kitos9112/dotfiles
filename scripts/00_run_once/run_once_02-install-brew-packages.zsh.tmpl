{{- if and (eq .chezmoi.os "linux") (eq .chezmoi.arch "amd64") -}}
#! /usr/bin/env bash

set -ev pipefail

# Install Homebrew
which -a brew || /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)"

# Ensure brew has been installed in its default place
export PATH=/home/linuxbrew/.linuxbrew/bin:/home/linuxbrew/.linuxbrew/sbin:${PATH}
brew update
brew install pyenv \
             poetry \
             kubernetes-cli \
             kops \
             helm \
             k9s \
             docker-credential-helper-ecr || echo "Catching some errors"
brew upgrade
{{- end -}}
